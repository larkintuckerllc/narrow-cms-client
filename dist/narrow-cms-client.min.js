!function(){"use strict";angular.module("ncModule",["ngResource","ngCookies"])}(),function(){"use strict";function e(){function e(e){r=e}function n(e){c=e}function t(e){u=e}function i(){var e={};return e.apiRootURI=r,e.pencilCss=c,e.pencilHTML=u,e}var o=this,r="/narrow-cms",c=["width: 20px;","height:20px;","background-color: rgba(255,0,0,0.5);"].join("\n"),u="";o.setApiRootURI=e,o.setPencilCss=n,o.setPencilHTML=t,o.$get=i}angular.module("ncModule").provider("ncConfigService",e)}(),function(){"use strict";function e(e,n,t,i){function o(){if(l)return s;var e=t.get("narrow-cms.username"),n=t.get("narrow-cms.token");return n?(s=e,l=n,s):!1}function r(){var n=e.defer();if(l)n.resolve(s);else{var i=t.get("narrow-cms.username"),o=t.get("narrow-cms.token");o?(s=i,l=o,n.resolve(s)):n.reject(401)}return n.promise}function c(o,r){function c(e){s=o,l=e.data.token,t.put("narrow-cms.username",o,{path:"/"}),t.put("narrow-cms.token",l,{path:"/"}),a.resolve()}function u(){a.reject()}var a=e.defer();return n.post(i.apiRootURI+"login",{username:o,password:r}).then(c)["catch"](u),a.promise}function u(){s=null,l=null,t.remove("narrow-cms.username",{path:"/"}),t.remove("narrow-cms.token",{path:"/"})}function a(){return l}var s=null,l=null,d={};return d.authSync=o,d.authAsync=r,d.login=c,d.logout=u,d.getToken=a,d}angular.module("ncModule").service("ncAuthService",e),e.$inject=["$q","$http","$cookies","ncConfigService"]}(),function(){"use strict";function e(e,n,t){function i(){return"bearer "+t.getToken()}return e(n.apiRootURI+"editables/:_id",{},{save:{method:"POST",headers:{Authorization:i}},query:{method:"GET",isArray:!0,headers:{Authorization:i}},update:{method:"PUT",params:{_id:"@_id"},headers:{Authorization:i}},"delete":{method:"DELETE",params:{_id:"@_id"},headers:{Authorization:i}}})}angular.module("ncModule").factory("ncEditableService",e),e.$inject=["$resource","ncConfigService","ncAuthService"]}(),function(){"use strict";function e(e,n,t){function i(t,i){function o(e){l!==e&&(l=e,u())}function r(){s.removeListener("change",c),s.destroy()}function c(){var e=s.getData();l!==e&&(l=e,n(a))}function u(){t.editable()?s.setData(l):i.html(l)}function a(){t.value=l}var s,l=t.value,d=i.find("div")[1],v=i.find("div")[2];t.$watch("value",o),t.editable()&&(t.$on("$destroy",r),d.style.display="block",v.setAttribute("contenteditable","true"),s=e.CKEDITOR.inline(v),s.on("change",c)),u()}return{restrict:"A",template:['<div style="position: relative; width:0px; height:0px">','<div style="display: none; position: absolute;',t.pencilCss,'">',t.pencilHTML,"</div>","</div>","<div>","</div>"].join(""),link:i,scope:{value:"=",editable:"&"}}}angular.module("ncModule").directive("ncEditable",e),e.$inject=["$window","$timeout","ncConfigService"]}();